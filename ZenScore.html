<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZenScore - Mindful Productivity Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* CSS Variables for theming */
    :root {
      --primary: #4361ee;
      --primary-dark: #3a56d4;
      --secondary: #6c63ff;
      --accent: #2ec4b6;
      --background: #f8fafc;
      --card-bg: #ffffff;
      --text-dark: #1e293b;
      --text-muted: #64748b;
      --productive: #10b981;
      --distractive: #ef4444;
      --neutral: #f59e0b;
      --restful: #3b82f6;
      --success: #22c55e;
      --warning: #f59e0b;
      --danger: #ef4444;
      --border-radius: 16px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-hover: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    /* Base styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      color: var(--text-dark);
      min-height: 100vh;
      padding: 20px;
      line-height: 1.6;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    /* Header */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 30px 0;
      margin-bottom: 40px;
      flex-wrap: wrap;
      gap: 20px;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border-radius: var(--border-radius);
      padding: 20px 30px;
      box-shadow: var(--shadow);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
      font-size: 32px;
      font-weight: 800;
      color: var(--primary);
      text-decoration: none;
    }

    .logo i {
      color: var(--accent);
      font-size: 36px;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-5px); }
    }

    .auth-buttons {
      display: flex;
      gap: 15px;
    }

    .btn {
      padding: 12px 24px;
      border-radius: 50px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(67, 97, 238, 0.3);
    }

    .btn-secondary {
      background: linear-gradient(135deg, var(--secondary), var(--accent));
      color: white;
    }

    .btn-accent {
      background: linear-gradient(135deg, var(--accent), var(--productive));
      color: white;
    }

    .btn-outline {
      background: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
      backdrop-filter: blur(10px);
    }

    .btn-outline:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-3px);
    }

    /* Main layout */
    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 30px;
    }

    @media (min-width: 900px) {
      .dashboard-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    @media (min-width: 1200px) {
      .dashboard-grid {
        grid-template-columns: 2fr 1fr;
      }
    }

    /* Card component */
    .card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: var(--border-radius);
      padding: 30px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
    }

    .card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-hover);
      border-color: rgba(67, 97, 238, 0.3);
    }

    h2 {
      font-size: 24px;
      margin-bottom: 25px;
      color: var(--text-dark);
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    h2 i {
      color: var(--accent);
    }

    /* Score and Feedback Section */
    .score-feedback-container {
      display: flex;
      flex-direction: column;
      grid-column: 1 / -1;
      gap: 30px;
    }

    @media (min-width: 900px) {
      .score-feedback-container {
        flex-direction: row;
      }
      
      .score-section, .feedback-section {
        flex: 1;
      }
    }

    .score-section {
      text-align: center;
    }

    .score-container {
      position: relative;
      width: 240px;
      height: 240px;
      margin: 30px auto;
    }

    .gauge-background {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: #f1f5f9;
      position: absolute;
      top: 0;
      left: 0;
      box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1);
    }

    .gauge-fill {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: conic-gradient(
        from 270deg,
        var(--gauge-color, var(--primary)) 0deg var(--fill-angle, 0deg), 
        transparent var(--fill-angle, 0deg) 360deg
      );
      mask: radial-gradient(white 60%, transparent 65%);
      -webkit-mask: radial-gradient(white 60%, transparent 65%);
      position: absolute;
      top: 0;
      left: 0;
      transition: var(--transition);
      filter: drop-shadow(0 0 10px rgba(67, 97, 238, 0.3));
    }

    .score-value {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 52px;
      font-weight: 800;
      color: var(--text-dark);
      transition: var(--transition);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .score-label {
      margin-top: 20px;
      font-size: 18px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Button container */
    .btn-container {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 30px 0 20px;
      flex-wrap: wrap;
    }

    /* Feedback Section */
    .feedback-section {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .feedback-container {
      background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
      border-left: 4px solid var(--primary);
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 25px;
      flex-grow: 1;
      position: relative;
      overflow: hidden;
    }

    .feedback-container::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 100px;
      height: 100px;
      background: radial-gradient(circle, rgba(67, 97, 238, 0.1), transparent);
      border-radius: 50%;
    }

    #feedback {
      font-size: 16px;
      line-height: 1.7;
      color: var(--text-dark);
      font-weight: 500;
      position: relative;
      z-index: 1;
    }

    /* Session History */
    .session-list {
      list-style: none;
      max-height: 500px;
      overflow-y: auto;
    }

    .session-list::-webkit-scrollbar {
      width: 6px;
    }

    .session-list::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 3px;
    }

    .session-list::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 3px;
    }

    .session-item {
      padding: 20px;
      margin: 15px 0;
      border-radius: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: var(--transition);
      background: rgba(255, 255, 255, 0.8);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .session-item:hover {
      transform: translateX(8px) scale(1.02);
      box-shadow: var(--shadow-hover);
    }

    .session-info {
      display: flex;
      align-items: center;
      gap: 18px;
    }

    .session-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: var(--shadow);
    }

    .session-app {
      font-weight: 600;
      font-size: 16px;
      color: var(--text-dark);
      margin-bottom: 2px;
    }

    .session-duration {
      background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(46, 196, 182, 0.1));
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-dark);
      border: 1px solid rgba(67, 97, 238, 0.2);
    }

    .session-category {
      font-size: 13px;
      opacity: 0.8;
      text-transform: capitalize;
      color: var(--text-muted);
      font-weight: 500;
    }

    /* Category colors */
    .productive {
      border-left: 4px solid var(--productive);
    }

    .productive .session-icon {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1));
      color: var(--productive);
    }

    .restful {
      border-left: 4px solid var(--restful);
    }

    .restful .session-icon {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(59, 130, 246, 0.1));
      color: var(--restful);
    }

    .neutral {
      border-left: 4px solid var(--neutral);
    }

    .neutral .session-icon {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1));
      color: var(--neutral);
    }

    .distractive {
      border-left: 4px solid var(--distractive);
    }

    .distractive .session-icon {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1));
      color: var(--distractive);
    }

    /* Stats */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-top: 25px;
    }

    .stat {
      background: linear-gradient(135deg, #f8fafc, #f1f5f9);
      padding: 25px;
      border-radius: 15px;
      text-align: center;
      transition: var(--transition);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .stat:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: var(--shadow-hover);
    }

    .stat-value {
      font-size: 32px;
      font-weight: 800;
      margin-bottom: 8px;
      color: var(--text-dark);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .stat-label {
      font-size: 13px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 600;
    }

    /* Progress bars */
    .progress-container {
      margin: 25px 0;
    }

    .progress-label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      color: var(--text-dark);
      font-size: 14px;
      font-weight: 600;
    }

    .progress-bar {
      height: 12px;
      background: #e2e8f0;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .progress {
      height: 100%;
      border-radius: 6px;
      transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .progress::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, transparent 25%, rgba(255, 255, 255, 0.2) 25%, rgba(255, 255, 255, 0.2) 50%, transparent 50%, transparent 75%, rgba(255, 255, 255, 0.2) 75%);
      background-size: 20px 20px;
      animation: progressStripes 1s linear infinite;
    }

    @keyframes progressStripes {
      0% { background-position: 0 0; }
      100% { background-position: 20px 0; }
    }

    .productive-progress {
      background: linear-gradient(135deg, var(--productive), #059669);
    }

    .restful-progress {
      background: linear-gradient(135deg, var(--restful), #2563eb);
    }

    .neutral-progress {
      background: linear-gradient(135deg, var(--neutral), #d97706);
    }

    .distractive-progress {
      background: linear-gradient(135deg, var(--distractive), #dc2626);
    }

    /* Animations */
    @keyframes fadeInUp {
      from { 
        opacity: 0; 
        transform: translateY(30px);
      }
      to { 
        opacity: 1; 
        transform: translateY(0);
      }
    }

    .fade-in {
      animation: fadeInUp 0.6s ease-out;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .pulse {
      animation: pulse 0.6s ease-in-out;
    }

    @keyframes scoreUpdate {
      0% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.2); }
      100% { transform: translate(-50%, -50%) scale(1); }
    }

    .score-update {
      animation: scoreUpdate 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 25px;
      flex-wrap: wrap;
      padding: 4px;
      background: #f1f5f9;
      border-radius: 50px;
    }

    .tab {
      padding: 12px 20px;
      background: transparent;
      border-radius: 50px;
      cursor: pointer;
      transition: var(--transition);
      color: var(--text-muted);
      font-size: 14px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .tab.active {
      background: var(--primary);
      color: white;
      box-shadow: 0 4px 8px rgba(67, 97, 238, 0.3);
      transform: translateY(-1px);
    }

    .tab:hover:not(.active) {
      background: rgba(67, 97, 238, 0.1);
      color: var(--primary);
    }

    .demo-note {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(245, 158, 11, 0.05));
      padding: 20px;
      border-radius: 12px;
      margin-top: 25px;
      border-left: 4px solid var(--neutral);
      color: var(--text-dark);
      font-size: 14px;
      font-weight: 500;
    }

    .demo-note i {
      color: var(--neutral);
      margin-right: 8px;
    }

    footer {
      text-align: center;
      margin-top: 60px;
      padding: 30px;
      color: var(--text-muted);
      font-size: 14px;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(5px);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .modal.show {
      opacity: 1;
    }

    .modal-content {
      background: white;
      padding: 40px;
      border-radius: var(--border-radius);
      width: 90%;
      max-width: 450px;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      transform: scale(0.9);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .modal.show .modal-content {
      transform: scale(1);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }

    .modal-title {
      font-size: 28px;
      color: var(--text-dark);
      font-weight: 700;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 28px;
      cursor: pointer;
      color: var(--text-muted);
      transition: var(--transition);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .close-btn:hover {
      background: #f1f5f9;
      color: var(--danger);
      transform: rotate(90deg);
    }

    .form-group {
      margin-bottom: 25px;
    }

    .form-group label {
      display: block;
      margin-bottom: 10px;
      color: var(--text-dark);
      font-weight: 600;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .form-group input {
      width: 100%;
      padding: 15px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 16px;
      transition: var(--transition);
      background: #f8fafc;
    }

    .form-group input:focus {
      outline: none;
      border-color: var(--primary);
      background: white;
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
    }

    .form-submit {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .form-submit:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(67, 97, 238, 0.3);
    }

    .form-footer {
      margin-top: 25px;
      text-align: center;
      color: var(--text-muted);
    }

    .form-footer a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
    }

    .form-footer a:hover {
      color: var(--primary-dark);
    }

    @media (max-width: 768px) {
      header {
        flex-direction: column;
        align-items: stretch;
        text-align: center;
      }
      
      .auth-buttons {
        justify-content: center;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
      
      .btn-container {
        flex-direction: column;
        align-items: center;
      }
      
      .btn {
        width: 100%;
        max-width: 280px;
        justify-content: center;
      }

      .score-container {
        width: 200px;
        height: 200px;
      }

      .score-value {
        font-size: 42px;
      }
    }

    .loading {
      opacity: 0.6;
      pointer-events: none;
    }

    .loading::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20px;
      height: 20px;
      margin: -10px 0 0 -10px;
      border: 2px solid var(--primary);
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--success);
      color: white;
      padding: 15px 20px;
      border-radius: 12px;
      box-shadow: var(--shadow-hover);
      transform: translateX(100%);
      transition: transform 0.3s ease;
      z-index: 1001;
      font-weight: 600;
    }

    .notification.show {
      transform: translateX(0);
    }

    .notification.error {
      background: var(--danger);
    }

    .notification.warning {
      background: var(--warning);
    }
  </style>
</head>
<body>
<!-- ================== Login Modal ================== -->
<div id="loginModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">Welcome Back</h2>
      <button class="close-btn" onclick="closeModal('loginModal')">&times;</button>
    </div>
    <form id="loginForm">
      <div class="form-group">
        <label for="loginEmail">Email Address</label>
        <input type="email" id="loginEmail" placeholder="Enter your email" required>
      </div>
      <div class="form-group">
        <label for="loginPassword">Password</label>
        <input type="password" id="loginPassword" placeholder="Enter your password" required>
      </div>
      <button type="submit" class="form-submit">Sign In</button>
    </form>
    <div class="form-footer">
      Don't have an account? <a onclick="showSignup()">Create one</a>
    </div>
  </div>
</div>

<!-- ================== Signup Modal ================== -->
<div id="signupModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">Join ZenScore</h2>
      <button class="close-btn" onclick="closeModal('signupModal')">&times;</button>
    </div>
    <form id="signupForm">
      <div class="form-group">
        <label for="signupName">Full Name</label>
        <input type="text" id="signupName" placeholder="Enter your full name" required>
      </div>
      <div class="form-group">
        <label for="signupEmail">Email Address</label>
        <input type="email" id="signupEmail" placeholder="Enter your email" required>
      </div>
      <div class="form-group">
        <label for="signupPassword">Password</label>
        <input type="password" id="signupPassword" placeholder="Create a secure password" required minlength="6">
      </div>
      <button type="submit" class="form-submit">Create Account</button>
    </form>
    <div class="form-footer">
      Already have an account? <a onclick="showLogin()">Sign in</a>
    </div>
  </div>
</div>

<!-- ================== Header ================== -->
<div class="container">
  <header>
    <div class="logo">
      <i class="fas fa-spa"></i>
      <span>ZenScore</span>
    </div>
    <div class="auth-buttons" id="authButtons">
      <button class="btn btn-outline" onclick="showLogin()">
        <i class="fas fa-sign-in-alt"></i> Sign In
      </button>
      <button class="btn btn-primary" onclick="showSignup()">
        <i class="fas fa-user-plus"></i> Get Started
      </button>
    </div>
  </header>
</div>

<!-- ================== Scripts ================== -->
<script>
const API_BASE_URL = "https://api.zenscore.com/v1"; // replace with your backend URL

async function apiCall(endpoint, options = {}) {
  const token = localStorage.getItem("authToken");
  const headers = {
    "Content-Type": "application/json",
    ...options.headers
  };
  if (token) headers.Authorization = `Bearer ${token}`;

  const response = await fetch(`${API_BASE_URL}${endpoint}`, { ...options, headers });
  if (!response.ok) throw new Error(`API error: ${response.status}`);
  return response.json();
}

// ================== Login ==================
async function login(email, password) {
  const response = await apiCall("/auth/login", {
    method: "POST",
    body: JSON.stringify({ email, password })
  });

  localStorage.setItem("authToken", response.token);
  localStorage.setItem("user", JSON.stringify(response.user));

  appState.isLoggedIn = true;
  appState.currentUser = response.user;

  showNotification("Welcome back! Login successful");
  closeModal("loginModal");
  updateAuthUI();
  loadDashboardData();
}

// ================== Signup ==================
async function signup(name, email, password) {
  const response = await apiCall("/auth/signup", {
    method: "POST",
    body: JSON.stringify({ name, email, password })
  });

  localStorage.setItem("authToken", response.token);
  localStorage.setItem("user", JSON.stringify(response.user));

  appState.isLoggedIn = true;
  appState.currentUser = response.user;

  showNotification("Account created successfully! üéâ");
  closeModal("signupModal");
  updateAuthUI();
  loadDashboardData();
}

// ================== Form Event Listeners ==================
document.getElementById("loginForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const email = document.getElementById("loginEmail").value.trim();
  const password = document.getElementById("loginPassword").value;
  try {
    await login(email, password);
  } catch {
    showNotification("Login failed. Please check your credentials.", "error");
  }
});

document.getElementById("signupForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const name = document.getElementById("signupName").value.trim();
  const email = document.getElementById("signupEmail").value.trim();
  const password = document.getElementById("signupPassword").value;
  try {
    await signup(name, email, password);
  } catch {
    showNotification("Signup failed. Please try again.", "error");
  }
});

// ================== Helpers ==================
function showLogin() {
  document.getElementById("signupModal").style.display = "none";
  document.getElementById("loginModal").style.display = "block";
}

function showSignup() {
  document.getElementById("loginModal").style.display = "none";
  document.getElementById("signupModal").style.display = "block";
}

function closeModal(id) {
  document.getElementById(id).style.display = "none";
}

// Example placeholders
function showNotification(msg, type = "success") {
  alert(`${type.toUpperCase()}: ${msg}`); // replace with real UI toast
}

function updateAuthUI() {
  // Example: hide auth buttons if logged in
  document.getElementById("authButtons").style.display = "none";
}

function loadDashboardData() {
  console.log("Fetching dashboard data... (implement with /score, /stats, etc.)");
}

</script>
    </header>

    <main>
    <div class="dashboard-grid">
      <!-- Score and Feedback Section -->
      <div class="score-feedback-container">
        <!-- Score Section -->
        <div class="card score-section">
        <h2><i class="fas fa-chart-pie"></i> Your ZenScore</h2>
        <div class="score-container">
          <div class="gauge-background"></div>
          <div class="gauge-fill" id="scoreGauge"></div>
          <div class="score-value" id="scoreValue">45</div>
        </div>
        <div class="score-label">Mindful Productivity Score</div>
        
        <div class="btn-container">
          <button class="btn btn-primary" onclick="trackSession()">
            <i class="fas fa-plus"></i> Track Session
          </button>
          <button class="btn btn-outline" onclick="showTips()"></button>
                <i class="fas fa-lightbulb"></i> Get Tips
              </button>
            </div>
          </div>
          <!-- Feedback Section -->
          <div class="card feedback-section">
            <h2><i class="fas fa-comment-dots"></i> AI Insights</h2>
            <div class="feedback-container">
              <p id="feedback">Your focus sessions are well-balanced with breaks. Try incorporating more deep work sessions in the morning when your energy is highest for optimal productivity.</p>
            </div>
            
            <div class="stats-grid">
              <div class="stat">
                <div class="stat-value" id="productiveTime">3h 42m</div>
                <div class="stat-label">Productive Time</div>
              </div>
              <div class="stat">
                <div class="stat-value" id="focusRate">78%</div>
                <div class="stat-label">Focus Rate</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Session History -->
        <div class="card">
          <h2><i class="fas fa-history"></i> Recent Sessions</h2>
          
          <div class="tabs">
            <div class="tab active" onclick="filterSessions('all', this)">All</div>
            <div class="tab" onclick="filterSessions('productive', this)">Productive</div>
            <div class="tab" onclick="filterSessions('restful', this)">Restful</div>
            <div class="tab" onclick="filterSessions('neutral', this)">Neutral</div>
            <div class="tab" onclick="filterSessions('distractive', this)">Distractive</div>
          </div>
          
          <ul class="session-list" id="sessionList">
            <li class="session-item productive">
              <div class="session-info">
                <div class="session-icon">
                  <i class="fas fa-code"></i>
                </div>
                <div>
                  <div class="session-app">Visual Studio Code</div>
                  <div class="session-category">Productive Work</div>
                </div>
              </div>
              <div class="session-duration">1h 25m</div>
            </li>
            
            <li class="session-item restful">
              <div class="session-info">
                <div class="session-icon">
                  <i class="fas fa-walking"></i>
                </div>
                <div>
                  <div class="session-app">Outdoor Walk</div>
                  <div class="session-category">Restful Break</div>
                </div>
              </div>
              <div class="session-duration">22m</div>
            </li>
            
            <li class="session-item neutral">
              <div class="session-info">
                <div class="session-icon">
                  <i class="fas fa-envelope"></i>
                </div>
                <div>
                  <div class="session-app">Email</div>
                  <div class="session-category">Neutral Activity</div>
                </div>
              </div>
              <div class="session-duration">18m</div>
            </li>
            
            <li class="session-item distractive">
              <div class="session-info">
                <div class="session-icon">
                  <i class="fab fa-youtube"></i>
                </div>
                <div>
                  <div class="session-app">YouTube</div>
                  <div class="session-category">Distractive</div>
                </div>
              </div>
              <div class="session-duration">47m</div>
            </li>
            
            <li class="session-item productive">
              <div class="session-info">
                <div class="session-icon">
                  <i class="fas fa-book"></i>
                </div>
                <div>
                  <div class="session-app">Research Reading</div>
                  <div class="session-category">Productive Work</div>
                </div>
              </div>
              <div class="session-duration">45m</div>
            </li>
          </ul>
        </div>

        <!-- Productivity Breakdown -->
        <div class="card">
          <h2><i class="fas fa-chart-bar"></i> Productivity Breakdown</h2>
          
          <div class="progress-container">
            <div class="progress-label">
              <span>Productive</span>
              <span id="productivePercent">52%</span>
            </div>
            <div class="progress-bar">
              <div class="progress productive-progress" id="productiveProgress" style="width: 52%"></div>
            </div>
          </div>
          
          <div class="progress-container">
            <div class="progress-label">
              <span>Restful</span>
              <span id="restfulPercent">18%</span>
            </div>
            <div class="progress-bar">
              <div class="progress restful-progress" style="width: 18%"></div>
            </div>
          </div>
          
          <div class="progress-container">
            <div class="progress-label">
              <span>Neutral</span>
              <span id="neutralPercent">15%</span>
            </div>
            <div class="progress-bar">
              <div class="progress neutral-progress" style="width: 15%"></div>
            </div>
          </div>
          
          <div class="progress-container">
            <div class="progress-label">
              <span>Distractive</span>
              <span id="distractivePercent">15%</span>
            </div>
            <div class="progress-bar">
              <div class="progress distractive-progress" style="width: 15%"></div>
            </div>
          </div>
          
          <div class="demo-note">
            <i class="fas fa-info-circle"></i> This is a demo dashboard. Connect productivity apps for real-time data tracking and insights.
          </div>
        </div>
      </div>
    </main>

    <footer>
      <p>&copy; 2024 ZenScore | Mindful Productivity Tracking | Made with ‚ù§Ô∏è for better focus</p>
    </footer>
  </div>

  <!-- Notification container -->
  <div id="notification" class="notification"></div>

  <script>
    // State management
    let appState = {
      isLoggedIn: false,
      currentUser: null,
      sessions: [],
      score: 72,
      stats: {
        productive: 52,
        restful: 18,
        neutral: 15,
        distractive: 15,
        productiveTime: '3h 42m',
        focusRate: '78%'
      }
    };

    // DOM elements
    const scoreGauge = document.getElementById('scoreGauge');
    const scoreValue = document.getElementById('scoreValue');
    const sessionList = document.getElementById('sessionList');
    const authButtons = document.getElementById('authButtons');
    const feedback = document.getElementById('feedback');

    // Utility functions
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = `notification ${type} show`;
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    function formatTime(minutes) {
      const hours = Math.floor(minutes / 60);
      const mins = minutes % 60;
      if (hours > 0) {
        return `${hours}h ${mins}m`;
      }
      return `${mins}m`;
    }

    // Initial setup
    document.addEventListener('DOMContentLoaded', function() {
      updateScore(appState.score);
      updateStats();
      updateGaugeColor(appState.score);
      updateFeedback(appState.score);
    });

    // Modal functions
    function showModal(modalId) {
      const modal = document.getElementById(modalId);
      modal.style.display = 'flex';
      setTimeout(() => modal.classList.add('show'), 10);
    }

    function closeModal(modalId) {
      const modal = document.getElementById(modalId);
      modal.classList.remove('show');
      setTimeout(() => modal.style.display = 'none', 300);
    }

    function showLogin() {
      showModal('loginModal');
    }

    function showSignup() {
      showModal('signupModal');
    }

    // Form handling
    document.getElementById('loginForm').addEventListener('submit', function(e) {
      e.preventDefault();
      login();
    });

    document.getElementById('signupForm').addEventListener('submit', function(e) {
      e.preventDefault();
      signup();
    });

    function login() {
      const email = document.getElementById('loginEmail').value.trim();
      const password = document.getElementById('loginPassword').value;
      
      if (!email || !password) {
        showNotification('Please enter both email and password', 'error');
        return;
      }
      
      if (!validateEmail(email)) {
        showNotification('Please enter a valid email address', 'error');
        return;
      }
      
      // Simulate login with loading state
      const submitBtn = document.querySelector('#loginForm .form-submit');
      submitBtn.textContent = 'Signing In...';
      submitBtn.disabled = true;
      
      setTimeout(() => {
        appState.isLoggedIn = true;
        appState.currentUser = { email, name: email.split('@')[0] };
        
        showNotification('Welcome back! Login successful');
        closeModal('loginModal');
        updateAuthUI();
        
        // Reset form
        document.getElementById('loginForm').reset();
        submitBtn.textContent = 'Sign In';
        submitBtn.disabled = false;
      }, 1000);
    }

    function signup() {
      const name = document.getElementById('signupName').value.trim();
      const email = document.getElementById('signupEmail').value.trim();
      const password = document.getElementById('signupPassword').value;
      
      if (!name || !email || !password) {
        showNotification('Please fill in all fields', 'error');
        return;
      }
      
      if (!validateEmail(email)) {
        showNotification('Please enter a valid email address', 'error');
        return;
      }
      
      if (password.length < 6) {
        showNotification('Password must be at least 6 characters long', 'error');
        return;
      }
      
      // Simulate signup with loading state
      const submitBtn = document.querySelector('#signupForm .form-submit');
      submitBtn.textContent = 'Creating Account...';
      submitBtn.disabled = true;
      
      setTimeout(() => {
        appState.isLoggedIn = true;
        appState.currentUser = { email, name };
        
        showNotification(`Welcome ${name}! Account created successfully`);
        closeModal('signupModal');
        updateAuthUI();
        
        // Reset form
        document.getElementById('signupForm').reset();
        submitBtn.textContent = 'Create Account';
        submitBtn.disabled = false;
      }, 1000);
    }

    function logout() {
      appState.isLoggedIn = false;
      appState.currentUser = null;
      updateAuthUI();
      showNotification('You have been logged out');
    }

    function updateAuthUI() {
      if (appState.isLoggedIn) {
        authButtons.innerHTML = `
          <button class="btn btn-outline" onclick="showProfile()">
            <i class="fas fa-user"></i> ${appState.currentUser.name}
          </button>
          <button class="btn btn-primary" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> Logout
          </button>
        `;
      } else {
        authButtons.innerHTML = `
          <button class="btn btn-outline" onclick="showLogin()">
            <i class="fas fa-sign-in-alt"></i> Sign In
          </button>
          <button class="btn btn-primary" onclick="showSignup()">
            <i class="fas fa-user-plus"></i> Get Started
          </button>
        `;
      }
    }

    function showProfile() {
      showNotification(`Profile: ${appState.currentUser.name} (${appState.currentUser.email})`, 'warning');
    }

    // Score and gauge functions
    function updateScore(score) {
      const angle = (score / 100) * 360;
      scoreGauge.style.setProperty('--fill-angle', `${angle}deg`);
      
      // Animate score value change
      const currentScore = parseInt(scoreValue.textContent);
      const increment = score > currentScore ? 1 : -1;
      let current = currentScore;
      
      const animation = setInterval(() => {
        current += increment;
        scoreValue.textContent = current;
        
        if ((increment > 0 && current >= score) || (increment < 0 && current <= score)) {
          current = score;
          scoreValue.textContent = current;
          clearInterval(animation);
          scoreValue.classList.add('score-update');
          setTimeout(() => scoreValue.classList.remove('score-update'), 800);
        }
      }, 30);
      
      updateGaugeColor(score);
      appState.score = score;
    }

    function updateGaugeColor(score) {
      let gaugeColor;
      if (score >= 80) {
        gaugeColor = 'var(--productive)';
      } else if (score >= 60) {
        gaugeColor = 'var(--primary)';
      } else if (score >= 40) {
        gaugeColor = 'var(--neutral)';
      } else {
        gaugeColor = 'var(--distractive)';
      }
      scoreGauge.style.setProperty('--gauge-color', gaugeColor);
    }

    // Stats functions
    function updateStats() {
      const stats = appState.stats;
      
      document.getElementById('productiveProgress').style.width = `${stats.productive}%`;
      document.getElementById('productivePercent').textContent = `${stats.productive}%`;
      document.getElementById('restfulPercent').textContent = `${stats.restful}%`;
      document.getElementById('neutralPercent').textContent = `${stats.neutral}%`;
      document.getElementById('distractivePercent').textContent = `${stats.distractive}%`;
      document.getElementById('productiveTime').textContent = stats.productiveTime;
      document.getElementById('focusRate').textContent = stats.focusRate;
    }

    // Session filtering
    function filterSessions(category, tabElement) {
      const sessions = document.querySelectorAll('.session-item');
      const tabs = document.querySelectorAll('.tab');
      
      // Update active tab
      tabs.forEach(tab => tab.classList.remove('active'));
      tabElement.classList.add('active');
      
      // Show/hide sessions with animation
      sessions.forEach((session, index) => {
        setTimeout(() => {
          if (category === 'all') {
            session.style.display = 'flex';
            session.classList.add('fade-in');
          } else if (session.classList.contains(category)) {
            session.style.display = 'flex';
            session.classList.add('fade-in');
          } else {
            session.style.display = 'none';
          }
        }, index * 50);
      });
      
      // Clean up animation classes
      setTimeout(() => {
        sessions.forEach(session => session.classList.remove('fade-in'));
      }, 1000);
    }

    // Session tracking
    function trackSession() {
      if (!appState.isLoggedIn) {
        showNotification('Please sign in to track sessions', 'warning');
        showLogin();
        return;
      }
      
      const categories = ['productive', 'restful', 'neutral', 'distractive'];
      const sessionData = {
        productive: {
          apps: ['VS Code', 'Figma', 'Notion', 'Photoshop', 'Research'],
          icons: ['code', 'palette', 'sticky-note', 'paint-brush', 'book'],
          label: 'Productive Work'
        },
        restful: {
          apps: ['Meditation', 'Walk', 'Coffee Break', 'Stretching', 'Fresh Air'],
          icons: ['spa', 'walking', 'coffee', 'dumbbell', 'wind'],
          label: 'Restful Break'
        },
        neutral: {
          apps: ['Email', 'Calendar', 'File Organization', 'System Updates', 'Planning'],
          icons: ['envelope', 'calendar', 'folder', 'cog', 'clipboard-list'],
          label: 'Neutral Activity'
        },
        distractive: {
          apps: ['YouTube', 'Social Media', 'News', 'Gaming', 'Random Browsing'],
          icons: ['youtube', 'share-alt', 'newspaper', 'gamepad', 'globe'],
          label: 'Distractive'
        }
      };
      
      const randomCategory = categories[Math.floor(Math.random() * categories.length)];
      const categoryData = sessionData[randomCategory];
      const randomApp = categoryData.apps[Math.floor(Math.random() * categoryData.apps.length)];
      const randomIcon = categoryData.icons[Math.floor(Math.random() * categoryData.icons.length)];
      const randomDuration = Math.floor(Math.random() * 90) + 10;
      
      // Create new session element
      const newSession = document.createElement('li');
      newSession.className = `session-item ${randomCategory} fade-in`;
      newSession.innerHTML = `
        <div class="session-info">
          <div class="session-icon">
            <i class="fas fa-${randomIcon}"></i>
          </div>
          <div>
            <div class="session-app">${randomApp}</div>
            <div class="session-category">${categoryData.label}</div>
          </div>
        </div>
        <div class="session-duration">${formatTime(randomDuration)}</div>
      `;
      
      // Add to session list
      sessionList.insertBefore(newSession, sessionList.firstChild);
      
      // Update score based on category
      const currentScore = appState.score;
      let scoreChange = 0;
      
      switch (randomCategory) {
        case 'productive':
          scoreChange = Math.floor(Math.random() * 5) + 2;
          break;
        case 'restful':
          scoreChange = Math.floor(Math.random() * 3) + 1;
          break;
        case 'neutral':
          scoreChange = Math.floor(Math.random() * 3) - 1;
          break;
        case 'distractive':
          scoreChange = -(Math.floor(Math.random() * 4) + 2);
          break;
      }
      
      const newScore = Math.max(0, Math.min(100, currentScore + scoreChange));
      updateScore(newScore);
      updateFeedback(newScore);
      
      // Update stats
      updateSessionStats();
      
      showNotification(`${randomApp} session tracked! (${formatTime(randomDuration)})`);
    }

    function updateSessionStats() {
      // Simulate updated stats based on recent sessions
      const randomVariation = () => Math.floor(Math.random() * 10) - 5;
      
      appState.stats.productive = Math.max(20, Math.min(70, appState.stats.productive + randomVariation()));
      appState.stats.restful = Math.max(10, Math.min(30, appState.stats.restful + randomVariation()));
      appState.stats.neutral = Math.max(10, Math.min(25, appState.stats.neutral + randomVariation()));
      appState.stats.distractive = Math.max(5, Math.min(30, appState.stats.distractive + randomVariation()));
      
      // Ensure total is approximately 100%
      const total = appState.stats.productive + appState.stats.restful + appState.stats.neutral + appState.stats.distractive;
      const factor = 100 / total;
      
      appState.stats.productive = Math.round(appState.stats.productive * factor);
      appState.stats.restful = Math.round(appState.stats.restful * factor);
      appState.stats.neutral = Math.round(appState.stats.neutral * factor);
      appState.stats.distractive = Math.round(appState.stats.distractive * factor);
      
      // Update productive time and focus rate
      const baseMinutes = 180 + Math.floor(Math.random() * 120);
      const hours = Math.floor(baseMinutes / 60);
      const minutes = baseMinutes % 60;
      appState.stats.productiveTime = `${hours}h ${minutes}m`;
      appState.stats.focusRate = `${Math.max(50, Math.min(95, 75 + Math.floor(Math.random() * 20)))}%`;
      
      updateStats();
    }

    // Feedback system
    function updateFeedback(score) {
      const feedbackMessages = {
        excellent: [
          "Outstanding! You're maintaining exceptional focus and mindfulness. Your productivity flow is truly inspiring!",
          "Fantastic work! Your balanced approach to work and rest is creating optimal conditions for sustained high performance.",
          "Excellent! You've found the perfect rhythm between intense focus and restorative breaks. Keep this momentum!"
        ],
        good: [
          "Great job! Your focus sessions show good discipline. Consider scheduling your most challenging tasks during peak energy hours.",
          "Well done! You're building strong productivity habits. Try adding brief mindfulness moments between task transitions.",
          "Good progress! Your work-rest balance is improving. Experiment with slightly longer focus blocks for deeper work."
        ],
        fair: [
          "You're making steady progress! Consider using the Pomodoro technique to improve focus intensity and reduce decision fatigue.",
          "Keep building! Try setting specific goals for each work session and minimizing notifications during focused time blocks.",
          "Good effort! Schedule your most important work when your energy is highest, typically in the first few hours of your day."
        ],
        needs_improvement: [
          "Let's optimize your focus! Try using website blockers during work sessions and create a dedicated workspace free from distractions.",
          "Building better habits takes time! Start with shorter 15-minute focus sessions and gradually increase duration as your attention strengthens.",
          "Every step counts! Practice single-tasking and take regular breaks to prevent mental fatigue. Small consistent changes lead to big results."
        ]
      };
      
      let category;
      if (score >= 80) category = 'excellent';
      else if (score >= 60) category = 'good';
      else if (score >= 40) category = 'fair';
      else category = 'needs_improvement';
      
      const messages = feedbackMessages[category];
      const randomMessage = messages[Math.floor(Math.random() * messages.length)];
      
      // Animate feedback update
      feedback.style.opacity = '0.5';
      setTimeout(() => {
        feedback.textContent = randomMessage;
        feedback.style.opacity = '1';
      }, 300);
    }

    // Tips system
    function showTips() {
      const tips = [
        "üçÖ Pomodoro Technique: Work for 25 minutes, then take a 5-minute break. After 4 cycles, take a longer 15-30 minute break.",
        "üåÖ Peak Hours: Schedule your most important and challenging tasks during your natural energy peaks (often morning hours).",
        "üëÄ 20-20-20 Rule: Every 20 minutes, look at something 20 feet away for at least 20 seconds to reduce eye strain.",
        "üö´ Digital Minimalism: Use website blockers and turn off non-essential notifications during focused work sessions.",
        "üßò Mindful Transitions: Take 2-3 deep breaths between tasks to reset your mental state and improve focus quality.",
        "üéØ Single-tasking: Focus on one task at a time. Multitasking reduces efficiency and increases mental fatigue.",
        "üèÉ‚Äç‚ôÇÔ∏è Movement Breaks: Stand up and move for 2-3 minutes every hour to boost energy and cognitive function.",
        "üìù Time Blocking: Schedule specific time slots for different types of work to create structure and reduce decision fatigue.",
        "üå± Progressive Growth: Start with shorter focus sessions (15-20 minutes) and gradually increase as your attention span strengthens.",
        "üíß Hydration & Nutrition: Stay hydrated and eat brain-friendly foods (nuts, berries, fish) to maintain cognitive performance."
      ];
      
      const randomTip = tips[Math.floor(Math.random() * tips.length)];
      showNotification(randomTip, 'warning');
    }
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        const modals = document.querySelectorAll('.modal.show');
        modals.forEach(modal => {
          modal.classList.remove('show');
          setTimeout(() => modal.style.display = 'none', 300);
        });
      }
    });
    window.addEventListener('click', function(e) {
      if (e.target.classList.contains('modal')) {
        closeModal(e.target.id);
      }
    });
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey || e.metaKey) {
        switch(e.key) {
          case 'k':
            e.preventDefault();
            trackSession();
            break;
          case '/':
            e.preventDefault();
            showTips();
            break;
        }
      }
    });
    setInterval(() =>
    {
      console.log('Auto-saving state...', appState);
    }, 30000);
    if ('IntersectionObserver' in window) {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('fade-in');
          }
        });
      }, { threshold: 0.1 });

      document.querySelectorAll('.card').forEach(card => {
        observer.observe(card);
      });
    }
  </script>
</body>
</html>